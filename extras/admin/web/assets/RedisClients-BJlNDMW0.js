const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/KeyValue-Bb2tmbS-.js","assets/QTd-po4U0AVJ.js","assets/index-ZajWnxG1.js","assets/index-G0ic_0eP.css","assets/format-B8DKuPGh.js","assets/QTooltip-D4R9T5Fc.js","assets/QTable-CXYRITav.js","assets/ClosePopup-LSrQ-VjT.js"])))=>i.map(i=>d[i]);
import{_ as q,ag as V,Y as Q,a7 as z,$ as g,C as f,f as n,Z as u,a0 as s,ai as N,a2 as _,a3 as m,aj as D,a9 as b,a5 as c,a4 as p,G as L,a1 as k,ah as S,al as B,F,ac as w,af as I,ae as h,r as y,am as T}from"./index-ZajWnxG1.js";import{e as U}from"./format-B8DKuPGh.js";import{Q as v}from"./QTooltip-D4R9T5Fc.js";import{Q as A}from"./QInnerLoading-DKttGab9.js";import{Q as R}from"./QTable-CXYRITav.js";import{C as E}from"./ClosePopup-LSrQ-VjT.js";import{T as P}from"./TouchPan-B1-PqlLb.js";let t;const M=["id","addressPort","databaseId","name","user","fileDescriptor","age","idle","flags","rbp","rbs","totalMemoryConsumed","bufferedMultiCommandsMemory","multiCommandContext","channelSubscribtions","shardChannelSubscriptions","patternSubscrbtions","bufferLength","bufferFreeSpace","outputBufferLength","outputListLength","outputBufferMemoryUsage","events","lastCommand","incompleteArguments","trackingRedirection","respProtocolVersion","libName","libVersion","bindAddress"],K={props:["parameters"],components:{KeyValue:V(()=>T(()=>import("./KeyValue-Bb2tmbS-.js"),__vite__mapDeps([0,1,2,3,4,5,6,7])))},setup(){return{util:h,table:y({rows:[],columns:[],loading:!1,pagination:{page:1,rowsPerPage:10}}),main:y(w.dialog.init(()=>t.main)),view:y(w.dialog.init(()=>t.view))}},created(){t=this;let e=[];for(const o of M)e.push({name:o,label:o.substring(0,1).toUpperCase()+o.substring(1),field:o,align:"left"});t.table.columns=e,t.do_request({pagination:t.table.pagination})},methods:{do_request(e){t.table.selected=[];let{page:o,rowsPerPage:r}=e?.pagination?e.pagination:t.table.pagination,l={name:t.parameters.name,index:o,size:r};t.table.loading=!0,I.call({path:"/redis/clients",params:l,onFinish(){t.table.loading=!1},onSuccess(d){if(t.table.rows=[],h.isObject(d)){t.table.rows=h.isArray(d.data)?d.data:[];let i=t.table.pagination;i.page=d.index,i.rowsPerPage=d.size,i.rowsNumber=d.records}}})},on_refresh_click(){t.do_request({pagination:t.table.pagination})},on_page_changed(){let e=+t.table.pagination.page;!isNaN(e)&&e>0&&t.do_request({pagination:t.table.pagination})},on_view_click(e){let o=[];for(const r of e.cols)o.push({label:r.label,value:e.row[r.field]});w.dialog.show(t.view,{title:e.row.addressPort,name:e.row.name,badge:e.row.isDefault===!0,rows:o})}}},j={class:"text-h6"},O={class:"full-width row flex-center text-accent q-gutter-sm"},G={class:"text-subtitle2"},Y={class:"text-caption"};function Z(e,o,r,l,d,i){const x=Q("KeyValue");return g(),z(F,null,[f((g(),u(S,{style:k("min-width: 50vw; max-width: 90vw;"+l.main.style)},{default:s(()=>[n(N,{class:"q-pa-none"},{default:s(()=>[n(R,{class:"table-sticky-header q-ma-none",rows:l.table.rows,columns:l.table.columns,"row-key":"id",loading:l.table.loading,selection:"single",pagination:l.table.pagination,"onUpdate:pagination":o[1]||(o[1]=a=>l.table.pagination=a),dense:e.$q.screen.lt.md,"no-data-label":e.$t("error.data_not_available"),"rows-per-page-label":" ","rows-per-page-options":[10,20,30,40,50],"selected-rows-label":a=>{},onRequest:i.do_request,"binary-state-sort":"",separator:"cell",style:{"max-height":"70vh"},bordered:""},{"top-left":s(()=>[b("div",j,[p(c(r.parameters.title)+" ",1),r.parameters.badge===!0?(g(),u(U,{key:0,color:"orange",rounded:"",align:"top",transparent:""})):_("",!0)])]),"top-right":s(()=>[n(m,{round:"",glossy:"",dense:"",size:"sm",icon:"refresh",class:"q-ml-sm",loading:l.table.loading,onClick:i.on_refresh_click},{default:s(()=>[n(v,null,{default:s(()=>[p(c(e.$t("label.refresh")),1)]),_:1})]),_:1},8,["loading","onClick"]),f((g(),u(m,{round:"",glossy:"",dense:"",size:"sm",icon:"close",class:"q-ml-sm"},{default:s(()=>[n(v,null,{default:s(()=>[p(c(e.$t("label.close")),1)]),_:1})]),_:1})),[[E]])]),"no-data":s(({message:a})=>[b("div",O,[n(L,{size:"2em",name:"block"}),b("span",G,c(a),1)])]),loading:s(()=>[n(A,{showing:"",color:"primary"})]),"body-selection":s(a=>[n(m,{glossy:"",round:"",dense:"",size:"sm",class:"q-ma-none q-ml-xs q-mr-sm",color:"deep-purple",icon:"visibility",onClick:C=>i.on_view_click(a)},{default:s(()=>[n(v,null,{default:s(()=>[p(c(e.$t("label.view")),1)]),_:1})]),_:2},1032,["onClick"])]),pagination:s(a=>[a.pagesNumber>2?(g(),u(m,{key:0,glossy:"",size:"sm",icon:"first_page",color:"grey-8",round:"",dense:"",flat:"",disable:a.isFirstPage,onClick:a.firstPage},null,8,["disable","onClick"])):_("",!0),n(m,{glossy:"",size:"sm",icon:"chevron_left",color:"grey-8",round:"",dense:"",flat:"",disable:a.isFirstPage,onClick:a.prevPage},null,8,["disable","onClick"]),n(D,{dense:"",borderless:"",type:"number","input-class":"text-center q-ml-xs q-mr-xs","input-style":"max-width: 60px;",modelValue:l.table.pagination.page,"onUpdate:modelValue":[o[0]||(o[0]=C=>l.table.pagination.page=C),i.on_page_changed]},{append:s(()=>[b("span",Y," / "+c(a.pagesNumber),1)]),_:2},1032,["modelValue","onUpdate:modelValue"]),n(m,{glossy:"",size:"sm",icon:"chevron_right",color:"grey-8",round:"",dense:"",flat:"",disable:a.isLastPage,onClick:a.nextPage},null,8,["disable","onClick"]),a.pagesNumber>2?(g(),u(m,{key:1,glossy:"",size:"sm",icon:"last_page",color:"grey-8",round:"",dense:"",flat:"",disable:a.isLastPage,onClick:a.lastPage},null,8,["disable","onClick"])):_("",!0)]),_:1},8,["rows","columns","loading","pagination","dense","no-data-label","onRequest"])]),_:1})]),_:1},8,["style"])),[[P,l.main.onDrag,void 0,{mouse:!0}]]),n(B,{modelValue:l.view.show,"onUpdate:modelValue":o[2]||(o[2]=a=>l.view.show=a),"transition-show":"scale","transition-hide":"fade","backdrop-filter":"blur(1px)",persistent:""},{default:s(()=>[f(n(x,{parameters:l.view.parameters,style:k(l.view.style)},null,8,["parameters","style"]),[[P,l.view.onDrag,void 0,{mouse:!0}]])]),_:1},8,["modelValue"])],64)}const te=q(K,[["render",Z]]);export{te as default};
