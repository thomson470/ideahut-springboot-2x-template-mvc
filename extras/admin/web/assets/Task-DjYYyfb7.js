import{Q as k}from"./QSpace-CfwQ6zIi.js";import{Q as d}from"./QTooltip-D4R9T5Fc.js";import{_ as z,a7 as q,$ as u,f as t,a0 as a,a9 as c,a4 as n,Z as f,a2 as w,a5 as s,a3 as b,G as S,C,ah as x,a1 as Q,ai as P,al as $,F as D,af as v,ae as g,ac as p,r as _}from"./index-ZajWnxG1.js";import{Q as N}from"./QInnerLoading-DKttGab9.js";import{e as h}from"./format-B8DKuPGh.js";import{Q as T}from"./QTd-po4U0AVJ.js";import{Q as y}from"./QTable-CXYRITav.js";import{T as V}from"./TouchPan-B1-PqlLb.js";let e;const B={setup(){return{util:g,columns:[],table:_({rows:[],columns:[],loading:!1,pagination:{page:1,rowsPerPage:10}}),view:_({...p.dialog.init(()=>e.view),loading:!1,rows:[],name:null,title:null,isDefault:null})}},created(){e=this,e.columns=[{name:"label",label:e.$t("label.name"),field:"label",align:"left",sortable:!0},{name:"threadNamePrefix",label:e.$t("label.thread_name_prefix"),field:"threadNamePrefix",align:"left",sortable:!0},{name:"activeCount",label:e.$t("label.active_count"),field:"activeCount",align:"right",sortable:!0},{name:"queueSize",label:e.$t("label.queue_size"),field:"queueSize",align:"right",sortable:!0},{name:"poolSize",label:e.$t("label.pool_size"),field:"poolSize",align:"right",sortable:!0},{name:"queueCapacity",label:e.$t("label.queue_capacity"),field:"queueCapacity",align:"right",sortable:!0},{name:"maxPoolSize",label:e.$t("label.max_pool_size"),field:"maxPoolSize",align:"right",sortable:!0},{name:"corePoolSize",label:e.$t("label.core_pool_size"),field:"corePoolSize",align:"right",sortable:!0},{name:"keepAliveSeconds",label:e.$t("label.keep_alive_seconds"),field:"keepAliveSeconds",align:"right",sortable:!0},{name:"threadPriority",label:e.$t("label.thread_priority"),field:"threadPriority",align:"right",sortable:!0}],e.do_request()},methods:{do_request(){e.table.loading=!0,v.call({path:"/task/infos",onFinish(){e.table.loading=!1},onSuccess(l){e.table.rows=g.isArray(l)?l:[]}})},on_view_click(l){let r=e.view;r.name=l.row.name,r.title=l.row.label,r.isDefault=l.row.isDefault,p.dialog.show(r),e.get_view()},get_view(){e.view.loading=!0,v.call({path:"/task/info",params:{handler:e.view.name},onFinish(){e.view.loading=!1},onSuccess(l){g.isObject(l)?e.view.rows=[{label:e.$t("label.name"),value:l.label},{label:e.$t("label.thread_name_prefix"),value:l.threadNamePrefix},{label:e.$t("label.active_count"),value:l.activeCount},{label:e.$t("label.queue_size"),value:l.queueSize},{label:e.$t("label.pool_size"),value:l.poolSize},{label:e.$t("label.queue_capacity"),value:l.queueCapacity},{label:e.$t("label.max_pool_size"),value:l.maxPoolSize},{label:e.$t("label.core_pool_size"),value:l.corePoolSize},{label:e.$t("label.keep_alive_seconds"),value:l.keepAliveSeconds},{label:e.$t("label.thread_priority"),value:l.threadPriority}]:e.view.rows=[]}})}}},A={class:"full-width row flex-center text-accent q-gutter-sm"},F={class:"text-subtitle2"},U={class:"text-h6"};function I(l,r,j,o,E,m){return u(),q(D,null,[t(y,{class:"table-sticky-header q-ma-sm",rows:o.table.rows,columns:o.columns,"row-key":"name",loading:o.table.loading,selection:"single",selected:o.table.selected,"onUpdate:selected":r[0]||(r[0]=i=>o.table.selected=i),pagination:o.table.pagination,"onUpdate:pagination":r[1]||(r[1]=i=>o.table.pagination=i),dense:l.$q.screen.lt.md,"no-data-label":l.$t("error.data_not_available"),"rows-per-page-label":" ","selected-rows-label":i=>{},"binary-state-sort":"",separator:"cell",bordered:""},{top:a(()=>[t(k),t(b,{glossy:"",round:"",dense:"",class:"q-ma-none q-ml-md",color:"indigo",icon:"refresh",loading:o.table.loading,onClick:m.do_request},{default:a(()=>[t(d,null,{default:a(()=>[n(s(l.$t("label.refresh")),1)]),_:1})]),_:1},8,["loading","onClick"])]),"no-data":a(({message:i})=>[c("div",A,[t(S,{size:"2em",name:"block"}),c("span",F,s(i),1)])]),loading:a(()=>[t(N,{showing:"",color:"primary"})]),"body-selection":a(i=>[t(b,{glossy:"",round:"",dense:"",size:"sm",class:"q-ma-none q-ml-xs q-mr-sm",color:"deep-purple",icon:"visibility",onClick:G=>m.on_view_click(i)},{default:a(()=>[t(d,null,{default:a(()=>[n(s(l.$t("label.view")),1)]),_:1})]),_:2},1032,["onClick"])]),"body-cell":a(i=>[t(T,{props:i},{default:a(()=>[c("span",null,[n(s(i.value)+" ",1),i.col.name==="label"&&i.row.isDefault===!0?(u(),f(h,{key:0,color:"orange",rounded:"",align:"top",transparent:""})):w("",!0)])]),_:2},1032,["props"])]),_:1},8,["rows","columns","loading","selected","pagination","dense","no-data-label"]),t($,{modelValue:o.view.show,"onUpdate:modelValue":r[3]||(r[3]=i=>o.view.show=i),"transition-show":"scale","transition-hide":"fade","backdrop-filter":"blur(1px)"},{default:a(()=>[C((u(),f(x,{style:Q("min-width: 40vw;"+o.view.style)},{default:a(()=>[t(P,{class:"q-pa-none"},{default:a(()=>[t(y,{class:"table-sticky-header no-column",style:{"max-height":"70vh"},rows:o.view.rows,separator:"cell",filter:o.view.filter,"rows-per-page-options":[0],"hide-bottom":"","hide-header":"",bordered:"",dense:""},{"top-left":a(()=>[c("div",U,[n(s(o.view.title)+" ",1),o.view.isDefault===!0?(u(),f(h,{key:0,color:"orange",rounded:"",align:"top",transparent:""})):w("",!0)])]),"top-right":a(()=>[t(b,{round:"",glossy:"",dense:"",size:"sm",icon:"refresh",class:"q-ml-lg",loading:o.view.loading,onClick:m.get_view},{default:a(()=>[t(d,null,{default:a(()=>[n(s(l.$t("label.refresh")),1)]),_:1})]),_:1},8,["loading","onClick"]),t(b,{round:"",glossy:"",dense:"",size:"sm",icon:"close",class:"q-ml-sm",onClick:r[2]||(r[2]=i=>o.view.show=!1)},{default:a(()=>[t(d,null,{default:a(()=>[n(s(l.$t("label.close")),1)]),_:1})]),_:1})]),_:1},8,["rows","filter"])]),_:1})]),_:1},8,["style"])),[[V,o.view.onDrag,void 0,{mouse:!0}]])]),_:1},8,["modelValue"])],64)}const W=z(B,[["render",I]]);export{W as default};
