const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/KeyValue-Bb2tmbS-.js","assets/QTd-po4U0AVJ.js","assets/index-ZajWnxG1.js","assets/index-G0ic_0eP.css","assets/format-B8DKuPGh.js","assets/QTooltip-D4R9T5Fc.js","assets/QTable-CXYRITav.js","assets/ClosePopup-LSrQ-VjT.js"])))=>i.map(i=>d[i]);
import{_ as Q,ag as D,Y as B,a7 as U,$ as f,f as o,a0 as i,a3 as b,a4 as u,a5 as c,a9 as _,G,Z as h,a2 as x,ah as R,a1 as q,C as w,ai as k,al as E,aj as v,Q as L,ak as z,F,ac as g,ae as d,af as O,r as y,ab as K,am as j}from"./index-ZajWnxG1.js";import{e as W,Q as M,b as T,a as Y}from"./format-B8DKuPGh.js";import{Q as p}from"./QTooltip-D4R9T5Fc.js";import{Q as S,a as I}from"./QTable-CXYRITav.js";import{Q as V}from"./QForm-B5eZWOd2.js";import{C as P}from"./ClosePopup-LSrQ-VjT.js";import{T as A}from"./TouchPan-B1-PqlLb.js";let a;const Z={components:{KeyValue:D(()=>j(()=>import("./KeyValue-Bb2tmbS-.js"),__vite__mapDeps([0,1,2,3,4,5,6,7])))},setup(){return{APP:K,util:d,handler:y(null),table:y({rows:[],filters:{},columns:[],loading:!1,pagination:{page:1,rowsPerPage:30,sortBy:"groupId",descending:!1,count:!0}}),columns:y({coordinator:[],members:[]}),dialog:y({view:{...g.dialog.init(()=>a.dialog.view),rows:null,coordinator:null,members:null,deleting:!1},member:g.dialog.init(()=>a.dialog.member),search:g.dialog.init(()=>a.dialog.search)}),option:y({state:["","UNKNOWN","PREPARING_REBALANCE","COMPLETING_REBALANCE","STABLE","DEAD","EMPTY"],aclOperation:["","UNKNOWN","ANY","ALL","READ","WRITE","CREATE","DELETE","ALTER","DESCRIBE","CLUSTER_ACTION","DESCRIBE_CONFIGS","ALTER_CONFIGS","IDEMPOTENT_WRITE","CREATE_TOKENS","DESCRIBE_TOKENS"],boolean:["","true","false"]})}},created(){a=this,a.handler=a.$route.query.handler,a.table.columns=[{name:"groupId",label:a.$t("label.group_id"),field:"groupId",align:"left",sortable:!0},{name:"state",label:a.$t("label.state"),field:"state",align:"left",sortable:!0},{name:"isSimpleConsumerGroup",label:a.$t("label.simple_consumer_group"),field:"isSimpleConsumerGroup",align:"left",sortable:!0},{name:"partitionAssignor",label:a.$t("label.partition_assignor"),field:"partitionAssignor",align:"left"},{name:"aclOperations",label:a.$t("label.acl_operation"),field:"aclOperations",align:"left",format:e=>d.isArray(e)?e.join(", "):e}],a.columns.coordinator=[{name:"idInteger",label:a.$t("label.id_integer"),field:"idInteger",align:"left"},{name:"idString",label:a.$t("label.id_string"),field:"idString",align:"left"},{name:"host",label:a.$t("label.host"),field:"host",align:"left"},{name:"port",label:a.$t("label.port"),field:"port",align:"left"}],a.columns.members=[{name:"memberId",label:a.$t("label.member_id"),field:"memberId",align:"left"},{name:"clientId",label:a.$t("label.client_id"),field:"clientId",align:"left"},{name:"host",label:a.$t("label.host"),field:"host",align:"left"},{name:"partitions",label:a.$t("label.topic_partition"),field:"partitions",align:"left",format:e=>{let t="";if(d.isArray(e)){d.sort.array(e,"label");let s={};for(const l of e)d.isArray(s[l.topic])||(s[l.topic]=[]),s[l.topic].push(l.index);Object.keys(s).forEach(l=>{t+='["'+l+'" => '+s[l].join(", ")+"] "})}return t}}],a.on_refresh_click()},methods:{do_request(e){let{page:t,rowsPerPage:s,sortBy:l,descending:N}=a.get_pagination(e),n={name:a.handler,index:t,size:s,order:(N?"-":"")+l};Object.keys(a.table.filters).forEach(m=>{n[m]=a.table.filters[m]}),a.table.loading=!0,O.call({path:"/kafka/consumers",params:n,onFinish(){a.table.loading=!1},onSuccess(m){if(d.isObject(m)){a.table.rows=d.isArray(m.data)?m.data:[];let r=a.table.pagination;if(r.page=m.index,r.rowsPerPage=m.size,d.isNumber(m.records))r.rowsNumber=m.records;else{let C=m.index*m.size;a.table.rows.length!==m.size?r.rowsNumber=C:r.rowsNumber=C+1}}}})},get_pagination(e){let t=e?.pagination?e.pagination:a.table.pagination;return t?(a.table.pagination=t,t):a.table.pagination},on_refresh_click(){a.table.rows?.length||a.table.pagination.page>1&&(a.table.pagination.page=1),a.do_request({pagination:a.table.pagination})},on_view_click(e){let t=[];for(const l of e.cols)t.push({label:l.label,value:d.isFunction(l.format)?l.format(e.row[l.field],e.row):e.row[l.field]});let s=a.dialog.view;s.rows=t,s.coordinator=[e.row.coordinator],s.members=d.isArray(e.row.members)?e.row.members:[],s.groupId=e.row.groupId,g.dialog.show(s)},on_member_click(e){let t=[];for(const s of e.cols)t.push({label:s.label,value:d.isFunction(s.format)?s.format(e.row[s.field],e.row):e.row[s.field]});g.dialog.show(a.dialog.member,{search:!1,rows:t})},on_delete_group_click(){let e=a.dialog.view;g.confirm(function(){e.deleting=!0,O.call({path:"/kafka/consumer/group",method:"delete",params:{name:a.handler,groupId:e.groupId},onFinish(){e.deleting=!1},onSuccess(){let t=a.dialog.view;t.rows=null,t.coordinator=null,t.members=null,t.deleting=!1,g.dialog.hide(t),a.on_refresh_click()}})},"confirm.delete")},on_search_reset_click(){a.table.filters={}},on_search_filter_click(){let e=a.table.filters;d.isString(e.groupId)&&e.groupId!==""||delete e.groupId,d.isString(e.consumerState)&&e.consumerState!==""||delete e.consumerState,d.isString(e.isSimpleConsumerGroup)&&e.isSimpleConsumerGroup!==""||delete e.isSimpleConsumerGroup,d.isString(e.partitionAssignor)&&e.partitionAssignor!==""||delete e.partitionAssignor,d.isString(e.aclOperation)&&e.aclOperation!==""||delete e.aclOperation,a.do_request({pagination:a.table.pagination}),g.dialog.hide(a.dialog.search)},on_search_dialog_click(){g.dialog.show(a.dialog.search)}}},H={class:"full-width row flex-center text-accent q-gutter-sm"},J={class:"text-subtitle2"},X={class:"text-weight-bolder"},$={class:"text-weight-bolder"},ee={class:"col-6 q-pr-xs text-left"},le={class:"col-6 q-pl-xs text-right"};function ae(e,t,s,l,N,n){const m=B("KeyValue");return f(),U(F,null,[o(S,{class:"table-sticky-header q-ma-sm",rows:l.table.rows,columns:l.table.columns,loading:l.table.loading,selection:"single",dense:e.$q.screen.lt.md,"no-data-label":e.$t("error.data_not_available"),"rows-per-page-label":" ","rows-per-page-options":[10,20,30,40,50],"binary-state-sort":"",separator:"cell",pagination:l.table.pagination,"onUpdate:pagination":t[0]||(t[0]=r=>l.table.pagination=r),onRequest:n.do_request,bordered:""},{"top-right":i(()=>[o(b,{glossy:"",round:"",dense:"",class:"q-ma-none q-ml-md",color:"deep-orange",icon:"search",onClick:n.on_search_dialog_click},{default:i(()=>[Object.keys(l.table.filters).length?(f(),h(W,{key:0,class:"led-green",floating:""})):x("",!0),o(p,null,{default:i(()=>[u(c(e.$t("label.search")),1)]),_:1})]),_:1},8,["onClick"]),o(b,{glossy:"",round:"",dense:"",class:"q-ma-none q-ml-md",color:"indigo",icon:"refresh",loading:l.table.loading,onClick:n.on_refresh_click},{default:i(()=>[o(p,null,{default:i(()=>[u(c(e.$t("label.refresh")),1)]),_:1})]),_:1},8,["loading","onClick"])]),"no-data":i(({message:r})=>[_("div",H,[o(G,{size:"2em",name:"block"}),_("span",J,c(r),1)])]),"body-selection":i(r=>[o(b,{glossy:"",round:"",dense:"",size:"sm",class:"q-ma-none q-ml-xs q-mr-sm",color:"deep-purple",icon:"visibility",onClick:C=>n.on_view_click(r)},{default:i(()=>[o(p,null,{default:i(()=>[u(c(e.$t("label.view")),1)]),_:1})]),_:2},1032,["onClick"])]),_:1},8,["rows","columns","loading","dense","no-data-label","pagination","onRequest"]),o(E,{modelValue:l.dialog.view.show,"onUpdate:modelValue":t[1]||(t[1]=r=>l.dialog.view.show=r),"transition-show":"scale","transition-hide":"fade","backdrop-filter":"blur(1px)",bordered:""},{default:i(()=>[o(R,{style:q("min-width: 50vw; max-width: 90vw;"+l.dialog.view.style)},{default:i(()=>[w((f(),h(k,{class:"q-pa-xs q-pr-md text-right"},{default:i(()=>[o(b,{round:"",glossy:"",dense:"",size:"sm",icon:"delete",class:"q-ml-sm",loading:l.dialog.view.deleting,onClick:n.on_delete_group_click},{default:i(()=>[o(p,null,{default:i(()=>[u(c(e.$t("label.delete")),1)]),_:1})]),_:1},8,["loading","onClick"]),w((f(),h(b,{round:"",glossy:"",dense:"",size:"sm",icon:"close",class:"q-ml-sm"},{default:i(()=>[o(p,null,{default:i(()=>[u(c(e.$t("label.close")),1)]),_:1})]),_:1})),[[P]])]),_:1})),[[A,l.dialog.view.onDrag,void 0,{mouse:!0}]]),o(k,{class:"q-pa-xs"},{default:i(()=>[o(S,{class:"table-sticky-header no-column",rows:l.dialog.view.rows,separator:"cell","rows-per-page-options":[0],"hide-bottom":"","hide-header":"",bordered:"",dense:""},null,8,["rows"])]),_:1}),o(k,{class:"q-pa-xs"},{default:i(()=>[o(S,{columns:l.columns.coordinator,rows:l.dialog.view.coordinator,separator:"cell","rows-per-page-options":[0],"hide-bottom":"",bordered:"",dense:""},{top:i(()=>[_("span",X,c(e.$t("label.coordinator")),1)]),_:1},8,["columns","rows"]),l.dialog?.view?.members?.length?(f(),h(S,{key:0,class:"table-sticky-header q-mt-sm",selection:"single",columns:l.columns.members,rows:l.dialog.view.members,separator:"cell","rows-per-page-options":[0],"hide-bottom":"",bordered:"",dense:""},{top:i(()=>[_("span",$,c(e.$t("label.members")),1)]),"body-selection":i(r=>[o(b,{glossy:"",round:"",dense:"",size:"sm",class:"q-ma-none q-ml-xs q-mr-sm",color:"deep-purple",icon:"visibility",onClick:C=>n.on_member_click(r)},{default:i(()=>[o(p,null,{default:i(()=>[u(c(e.$t("label.view")),1)]),_:1})]),_:2},1032,["onClick"])]),_:1},8,["columns","rows"])):x("",!0)]),_:1})]),_:1},8,["style"])]),_:1},8,["modelValue"]),o(E,{modelValue:l.dialog.member.show,"onUpdate:modelValue":t[2]||(t[2]=r=>l.dialog.member.show=r),"transition-show":"scale","transition-hide":"fade","backdrop-filter":"blur(1px)"},{default:i(()=>[w(o(m,{parameters:l.dialog.member.parameters,style:q(l.dialog.member.style)},null,8,["parameters","style"]),[[A,l.dialog.member.onDrag,void 0,{mouse:!0}]])]),_:1},8,["modelValue"]),o(E,{modelValue:l.dialog.search.show,"onUpdate:modelValue":t[9]||(t[9]=r=>l.dialog.search.show=r),"transition-show":"scale","transition-hide":"fade","backdrop-filter":"blur(1px)",persistent:""},{default:i(()=>[o(R,{style:q("width: "+(e.$q.screen.lt.md?"100%;":"50%;")+l.dialog.search.style)},{default:i(()=>[w((f(),h(k,{class:"q-pa-none header-main",style:q(l.APP?.color?.header?"background: "+l.APP.color.header+" !important;":"")},{default:i(()=>[o(M,{class:"q-pr-none"},{default:i(()=>[o(T,null,{default:i(()=>[o(Y,{class:"text-h6 text-white"},{default:i(()=>[u(c(e.$t("label.search")),1)]),_:1})]),_:1}),o(T,{side:""},{default:i(()=>[w((f(),h(b,{class:"text-caption text-white q-pl-xs q-pr-xs q-mr-xs",flat:"",round:"",glossy:"",icon:"close"},{default:i(()=>[o(p,null,{default:i(()=>[u(c(e.$t("label.close")),1)]),_:1})]),_:1})),[[P]])]),_:1})]),_:1})]),_:1},8,["style"])),[[A,l.dialog.search.onDrag,void 0,{mouse:!0}]]),o(k,{style:{"max-height":"70vh"},class:"q-pa-xs q-mt-xs scroll"},{default:i(()=>[o(V,{onSubmit:n.on_search_filter_click,onReset:n.on_search_reset_click},{default:i(()=>[o(v,{modelValue:l.table.filters.groupId,"onUpdate:modelValue":t[3]||(t[3]=r=>l.table.filters.groupId=r),type:"text",label:e.$t("label.group_id"),filled:"",class:"q-mb-xs"},null,8,["modelValue","label"])]),_:1},8,["onSubmit","onReset"]),o(V,{onSubmit:n.on_search_filter_click,onReset:n.on_search_reset_click},{default:i(()=>[o(v,{modelValue:l.table.filters.topicName,"onUpdate:modelValue":t[4]||(t[4]=r=>l.table.filters.topicName=r),type:"text",label:e.$t("label.topic"),filled:"",class:"q-mb-xs"},null,8,["modelValue","label"])]),_:1},8,["onSubmit","onReset"]),o(I,{modelValue:l.table.filters.consumerState,"onUpdate:modelValue":t[5]||(t[5]=r=>l.table.filters.consumerState=r),label:e.$t("label.state"),options:l.option.state,filled:"",class:"q-mb-xs"},null,8,["modelValue","label","options"]),o(I,{modelValue:l.table.filters.isSimpleConsumerGroup,"onUpdate:modelValue":t[6]||(t[6]=r=>l.table.filters.isSimpleConsumerGroup=r),label:e.$t("label.simple_consumer_group"),options:l.option.boolean,filled:"",class:"q-mb-xs"},null,8,["modelValue","label","options"]),o(V,{onSubmit:n.on_search_filter_click,onReset:n.on_search_reset_click},{default:i(()=>[o(v,{modelValue:l.table.filters.partitionAssignor,"onUpdate:modelValue":t[7]||(t[7]=r=>l.table.filters.partitionAssignor=r),type:"text",label:e.$t("label.partition_assignor"),filled:"",class:"q-mb-xs"},null,8,["modelValue","label"])]),_:1},8,["onSubmit","onReset"]),o(I,{modelValue:l.table.filters.aclOperation,"onUpdate:modelValue":t[8]||(t[8]=r=>l.table.filters.aclOperation=r),label:e.$t("label.acl_operation"),options:l.option.aclOperation,filled:"",class:"q-mb-xs"},null,8,["modelValue","label","options"])]),_:1}),o(L),o(z,{class:"row"},{default:i(()=>[_("div",ee,[o(b,{label:e.$t("label.reset"),color:"orange","no-caps":"",glossy:"",onClick:n.on_search_reset_click},null,8,["label","onClick"])]),_("div",le,[o(b,{label:e.$t("label.filter"),color:"purple","no-caps":"",glossy:"",onClick:n.on_search_filter_click},null,8,["label","onClick"])])]),_:1})]),_:1},8,["style"])]),_:1},8,["modelValue"])],64)}const me=Q(Z,[["render",ae]]);export{me as default};
