const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/KeyValue-Bb2tmbS-.js","assets/QTd-po4U0AVJ.js","assets/index-ZajWnxG1.js","assets/index-G0ic_0eP.css","assets/format-B8DKuPGh.js","assets/QTooltip-D4R9T5Fc.js","assets/QTable-CXYRITav.js","assets/ClosePopup-LSrQ-VjT.js"])))=>i.map(i=>d[i]);
import{_ as T,ag as P,Y as N,a7 as U,$ as y,f as t,a0 as r,a3 as b,a4 as f,a5 as u,a9 as h,G as B,Z as q,a2 as D,C as k,a1 as w,al as R,ah as F,ai as Q,aj as g,Q as j,ak as A,F as O,ac as p,ae as n,af as x,r as v,ab as I,am as E}from"./index-ZajWnxG1.js";import{e as K,Q as L,b as C,a as G}from"./format-B8DKuPGh.js";import{Q as S}from"./QTooltip-D4R9T5Fc.js";import{Q as Y,a as Z}from"./QTable-CXYRITav.js";import{Q as _}from"./QForm-B5eZWOd2.js";import{T as z}from"./TouchPan-B1-PqlLb.js";import{C as H}from"./ClosePopup-LSrQ-VjT.js";let l;const J={components:{KeyValue:P(()=>E(()=>import("./KeyValue-Bb2tmbS-.js"),__vite__mapDeps([0,1,2,3,4,5,6,7])))},setup(){return{APP:I,util:n,handler:v(null),table:v({rows:[],filters:{},columns:[],loading:!1,pagination:{page:1,rowsPerPage:30,sortBy:"topic",descending:!1,count:!0}}),dialog:v({view:p.dialog.init(()=>l.dialog.view),properties:p.dialog.init(()=>l.dialog.properties),search:p.dialog.init(()=>l.dialog.search)}),option:v({boolean:["","true","false"]})}},created(){l=this,l.handler=l.$route.query.handler,l.table.columns=[{name:"topic",label:l.$t("label.topic"),field:"topic",align:"left",sortable:!0},{name:"isReply",label:l.$t("label.reply"),field:"isReply",align:"left",sortable:!0},{name:"keyType",label:l.$t("label.key_type"),field:"keyType",align:"left",sortable:!0},{name:"keySerializer",label:l.$t("label.key_serializer"),field:"keySerializer",align:"left",sortable:!0},{name:"valueType",label:l.$t("label.value_type"),field:"valueType",align:"left",sortable:!0},{name:"valueSerializer",label:l.$t("label.value_serializer"),field:"valueSerializer",align:"left",sortable:!0}],l.on_refresh_click()},methods:{do_request(e){let{page:i,rowsPerPage:d,sortBy:a,descending:m}=l.get_pagination(e),s={name:l.handler,index:i,size:d,order:(m?"-":"")+a};Object.keys(l.table.filters).forEach(c=>{s[c]=l.table.filters[c]}),l.table.loading=!0,x.call({path:"/kafka/senders",params:s,onFinish(){l.table.loading=!1},onSuccess(c){if(n.isObject(c)){l.table.rows=n.isArray(c.data)?c.data:[];let o=l.table.pagination;if(o.page=c.index,o.rowsPerPage=c.size,n.isNumber(c.records))o.rowsNumber=c.records;else{let V=c.index*c.size;l.table.rows.length!==c.size?o.rowsNumber=V:o.rowsNumber=V+1}}}})},get_pagination(e){let i=e?.pagination?e.pagination:l.table.pagination;return i?(l.table.pagination=i,i):l.table.pagination},on_refresh_click(){l.table.rows?.length||l.table.pagination.page>1&&(l.table.pagination.page=1),l.do_request({pagination:l.table.pagination})},on_view_click(e){let i=[];for(const a of e.cols)i.push({label:a.label,value:n.isFunction(a.format)?a.format(e.row[a.field],e.row):e.row[a.field]});let d=[];e.row.isReply===!0&&d.push({icon:e.row.isRunning?"stop":"play_arrow",label:l.$t(e.row.isRunning?"label.stop":"label.start"),color:e.row.isRunning?"pink-10":"purple-10",click:()=>l.on_start_stop_click(e)}),d.push({icon:"lightbulb",color:"teal-10",label:l.$t("label.properties"),click:()=>l.on_properties_click(e)}),p.dialog.show(l.dialog.view,{search:!1,rows:i,color:{close:"red"},actions:d})},on_properties_click(e){p.dialog.show(l.dialog.properties,{title:l.$t("label.properties"),name:l.handler,topic:e.row.topic,rows:[],onRefresh:l.get_properties})},get_properties(e){let i=n.isObject(e)?e:{};n.apply(i.onStart),x.call({path:"/kafka/sender/properties",params:{name:i.parameters.name,topic:i.parameters.topic},onFinish(){n.apply(i.onFinish)},onSuccess(d){if(n.isObject(d)){let a=[];Object.keys(d).forEach(m=>{a.push({label:m,value:d[m]})}),n.sort.array(a,"label"),n.apply(i.onData,a)}},notify:!0})},on_start_stop_click(e){let i=e.row,d=l.dialog.view.parameters.actions[0];p.confirm(function(){d.loading=!0,x.call({path:"/kafka/sender/"+(i.isRunning?"stop":"start"),method:"post",params:{name:l.handler,topic:i.topic},onFinish(){d.loading=!1},onSuccess(){i.isRunning=!i.isRunning,d.icon=i.isRunning?"stop":"play_arrow",d.label=l.$t(i.isRunning?"label.stop":"label.start"),d.color=i.isRunning?"pink-10":"purple-10"}})},"confirm."+(i.isRunning?"stop":"start"))},on_search_reset_click(){l.table.filters={}},on_search_filter_click(){let e=l.table.filters;n.isString(e.topicName)&&e.topicName!==""||delete e.topicName,n.isString(e.isReply)&&e.isReply!==""||delete e.isReply,n.isString(e.keyType)&&e.keyType!==""||delete e.keyType,n.isString(e.keySerializer)&&e.keySerializer!==""||delete e.keySerializer,n.isString(e.valueType)&&e.valueType!==""||delete e.valueType,n.isString(e.valueSerializer)&&e.valueSerializer!==""||delete e.valueSerializer,l.do_request({pagination:l.table.pagination}),p.dialog.hide(l.dialog.search)},on_search_dialog_click(){p.dialog.show(l.dialog.search)}}},M={class:"full-width row flex-center text-accent q-gutter-sm"},W={class:"text-subtitle2"},X={class:"col-6 q-pr-xs text-left"},$={class:"col-6 q-pl-xs text-right"};function ee(e,i,d,a,m,s){const c=N("KeyValue");return y(),U(O,null,[t(Y,{class:"table-sticky-header q-ma-sm",rows:a.table.rows,columns:a.table.columns,loading:a.table.loading,selection:"single",dense:e.$q.screen.lt.md,"no-data-label":e.$t("error.data_not_available"),"rows-per-page-label":" ","rows-per-page-options":[10,20,30,40,50],"binary-state-sort":"",separator:"cell",pagination:a.table.pagination,"onUpdate:pagination":i[0]||(i[0]=o=>a.table.pagination=o),onRequest:s.do_request,bordered:""},{"top-right":r(()=>[t(b,{glossy:"",round:"",dense:"",class:"q-ma-none q-ml-md",color:"deep-orange",icon:"search",onClick:s.on_search_dialog_click},{default:r(()=>[Object.keys(a.table.filters).length?(y(),q(K,{key:0,class:"led-green",floating:""})):D("",!0),t(S,null,{default:r(()=>[f(u(e.$t("label.search")),1)]),_:1})]),_:1},8,["onClick"]),t(b,{glossy:"",round:"",dense:"",class:"q-ma-none q-ml-md",color:"indigo",icon:"refresh",loading:a.table.loading,onClick:s.on_refresh_click},{default:r(()=>[t(S,null,{default:r(()=>[f(u(e.$t("label.refresh")),1)]),_:1})]),_:1},8,["loading","onClick"])]),"no-data":r(({message:o})=>[h("div",M,[t(B,{size:"2em",name:"block"}),h("span",W,u(o),1)])]),"body-selection":r(o=>[t(b,{glossy:"",round:"",dense:"",size:"sm",class:"q-ma-none q-ml-xs q-mr-sm",color:"deep-purple",icon:"visibility",onClick:V=>s.on_view_click(o)},{default:r(()=>[t(S,null,{default:r(()=>[f(u(e.$t("label.view")),1)]),_:1})]),_:2},1032,["onClick"])]),_:1},8,["rows","columns","loading","dense","no-data-label","pagination","onRequest"]),t(R,{modelValue:a.dialog.view.show,"onUpdate:modelValue":i[1]||(i[1]=o=>a.dialog.view.show=o),"transition-show":"scale","transition-hide":"fade","backdrop-filter":"blur(1px)"},{default:r(()=>[k(t(c,{parameters:a.dialog.view.parameters,style:w(a.dialog.view.style)},null,8,["parameters","style"]),[[z,a.dialog.view.onDrag,void 0,{mouse:!0}]])]),_:1},8,["modelValue"]),t(R,{modelValue:a.dialog.properties.show,"onUpdate:modelValue":i[2]||(i[2]=o=>a.dialog.properties.show=o),"transition-show":"scale","transition-hide":"fade","backdrop-filter":"blur(1px)"},{default:r(()=>[k(t(c,{parameters:a.dialog.properties.parameters,style:w(a.dialog.properties.style)},null,8,["parameters","style"]),[[z,a.dialog.properties.onDrag,void 0,{mouse:!0}]])]),_:1},8,["modelValue"]),t(R,{modelValue:a.dialog.search.show,"onUpdate:modelValue":i[9]||(i[9]=o=>a.dialog.search.show=o),"transition-show":"scale","transition-hide":"fade","backdrop-filter":"blur(1px)",persistent:""},{default:r(()=>[t(F,{style:w("width: "+(e.$q.screen.lt.md?"100%;":"50%;")+a.dialog.search.style)},{default:r(()=>[k((y(),q(Q,{class:"q-pa-none header-main",style:w(a.APP?.color?.header?"background: "+a.APP.color.header+" !important;":"")},{default:r(()=>[t(L,{class:"q-pr-none"},{default:r(()=>[t(C,null,{default:r(()=>[t(G,{class:"text-h6 text-white"},{default:r(()=>[f(u(e.$t("label.search")),1)]),_:1})]),_:1}),t(C,{side:""},{default:r(()=>[k((y(),q(b,{class:"text-caption text-white q-pl-xs q-pr-xs q-mr-xs",flat:"",round:"",glossy:"",icon:"close"},{default:r(()=>[t(S,null,{default:r(()=>[f(u(e.$t("label.close")),1)]),_:1})]),_:1})),[[H]])]),_:1})]),_:1})]),_:1},8,["style"])),[[z,a.dialog.search.onDrag,void 0,{mouse:!0}]]),t(Q,{style:{"max-height":"70vh"},class:"q-pa-xs q-mt-xs scroll"},{default:r(()=>[t(_,{onSubmit:s.on_search_filter_click,onReset:s.on_search_reset_click},{default:r(()=>[t(g,{modelValue:a.table.filters.topicName,"onUpdate:modelValue":i[3]||(i[3]=o=>a.table.filters.topicName=o),type:"text",label:e.$t("label.topic"),filled:"",class:"q-mb-xs"},null,8,["modelValue","label"])]),_:1},8,["onSubmit","onReset"]),t(_,{onSubmit:s.on_search_filter_click,onReset:s.on_search_reset_click},{default:r(()=>[t(g,{modelValue:a.table.filters.keyType,"onUpdate:modelValue":i[4]||(i[4]=o=>a.table.filters.keyType=o),type:"text",label:e.$t("label.key_type"),filled:"",class:"q-mb-xs"},null,8,["modelValue","label"])]),_:1},8,["onSubmit","onReset"]),t(_,{onSubmit:s.on_search_filter_click,onReset:s.on_search_reset_click},{default:r(()=>[t(g,{modelValue:a.table.filters.keySerializer,"onUpdate:modelValue":i[5]||(i[5]=o=>a.table.filters.keySerializer=o),type:"text",label:e.$t("label.key_serializer"),filled:"",class:"q-mb-xs"},null,8,["modelValue","label"])]),_:1},8,["onSubmit","onReset"]),t(_,{onSubmit:s.on_search_filter_click,onReset:s.on_search_reset_click},{default:r(()=>[t(g,{modelValue:a.table.filters.valueType,"onUpdate:modelValue":i[6]||(i[6]=o=>a.table.filters.valueType=o),type:"text",label:e.$t("label.value_type"),filled:"",class:"q-mb-xs"},null,8,["modelValue","label"])]),_:1},8,["onSubmit","onReset"]),t(_,{onSubmit:s.on_search_filter_click,onReset:s.on_search_reset_click},{default:r(()=>[t(g,{modelValue:a.table.filters.valueSerializer,"onUpdate:modelValue":i[7]||(i[7]=o=>a.table.filters.valueSerializer=o),type:"text",label:e.$t("label.value_serializer"),filled:"",class:"q-mb-xs"},null,8,["modelValue","label"])]),_:1},8,["onSubmit","onReset"]),t(Z,{modelValue:a.table.filters.isReply,"onUpdate:modelValue":i[8]||(i[8]=o=>a.table.filters.isReply=o),label:e.$t("label.reply"),options:a.option.boolean,filled:"",class:"q-mb-xs"},null,8,["modelValue","label","options"])]),_:1}),t(j),t(A,{class:"row"},{default:r(()=>[h("div",X,[t(b,{label:e.$t("label.reset"),color:"orange","no-caps":"",glossy:"",onClick:s.on_search_reset_click},null,8,["label","onClick"])]),h("div",$,[t(b,{label:e.$t("label.filter"),color:"purple","no-caps":"",glossy:"",onClick:s.on_search_filter_click},null,8,["label","onClick"])])]),_:1})]),_:1},8,["style"])]),_:1},8,["modelValue"])],64)}const ne=T(J,[["render",ee]]);export{ne as default};
