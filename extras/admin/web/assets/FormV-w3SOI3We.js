import{Q as w,b,a as Q}from"./format-B8DKuPGh.js";import{Q as V}from"./QTooltip-D4R9T5Fc.js";import{_ as k,Z as u,$ as r,a0 as o,C as g,f as n,ai as _,a1 as v,a4 as q,a5 as h,a3 as C,a9 as I,a7 as y,F as j,a8 as B,aj as D,ah as F,r as x}from"./index-ZajWnxG1.js";import{C as S}from"./ClosePopup-LSrQ-VjT.js";import{T}from"./TouchPan-B1-PqlLb.js";import{c as l}from"./Index-2Zuzj8Ve.js";import"./QSpace-CfwQ6zIi.js";import"./QTable-CXYRITav.js";import"./QInnerLoading-DKttGab9.js";import"./QSpinnerGears-BOF8vRdR.js";let i;const N={props:["parameters"],setup(){return{crud:l,title:x(null),fields:x([]),dialog:x(l.dialog.init(()=>i.dialog))}},created(){i=this;let d=l.get.object(i.parameters),p=l.get.object(d.template),c=l.get.object(d.form),a=l.get.object(d.data);i.title=c.title,i.fields=[];let f=!1,s;for(const e of c.fields){let t=l.getFieldValue(e.name,a);if(!f&&c.id.fields.includes(e.name)&&(f=!0),l.isFunction(e.format))t=e.format(t,a);else if(e.type==="enum"){try{s=p.enums[e.enum].find(m=>""+m.value==""+t).label}catch{s=t}t=s}else if(e.type==="option"){try{s=p.options[e.option].find(m=>""+m.value==""+t).label}catch{s=t}t=s}i.fields.push({type:e.type,label:e.label,value:t})}if(!f){let e=l.id.toPk(c.id,a);l.isDefined(e)&&e!==null&&i.fields.splice(0,0,{label:"ID",value:e})}}},P={class:"row"},L={key:0,class:"text-h6 text-center text-bold"};function U(d,p,c,a,f,s){return r(),u(F,{style:v("width: "+(d.$q.screen.lt.md?"100%;":"50%;")+a.dialog.style)},{default:o(()=>[g((r(),u(_,{class:"q-pa-none header-main",style:v(a.crud.config?.color?.header?"background: "+a.crud.config.color.header+" !important;":"")},{default:o(()=>[n(w,{class:"q-pr-none"},{default:o(()=>[n(b,null,{default:o(()=>[n(Q,{class:"text-h6 text-white"},{default:o(()=>[q(h(a.title),1)]),_:1})]),_:1}),n(b,{side:""},{default:o(()=>[g((r(),u(C,{class:"text-caption text-white q-pl-xs q-pr-xs q-mr-xs",flat:"",round:"",glossy:"",icon:"close"},{default:o(()=>[n(V,null,{default:o(()=>[q(h(d.$t("label.close")),1)]),_:1})]),_:1})),[[S]])]),_:1})]),_:1})]),_:1},8,["style"])),[[T,a.dialog.onDrag,void 0,{mouse:!0}]]),n(_,{style:{"max-height":"80vh"},class:"q-pa-xs q-mt-xs scroll"},{default:o(()=>[I("div",P,[(r(!0),y(j,null,B(a.fields,(e,t)=>(r(),y("div",{key:t,class:"col-md-6 col-sm-12 q-mb-xs",style:{width:"100%"}},[e.type==="title"?(r(),y("div",L,h(e.label),1)):(r(),u(D,{key:1,type:"text",label:e.label,modelValue:e.value,"onUpdate:modelValue":m=>e.value=m,readonly:"",filled:"",autogrow:"",class:"q-mb-xs",style:{"max-height":"200px",overflow:"scroll"}},null,8,["label","modelValue","onUpdate:modelValue"]))]))),128))])]),_:1})]),_:1},8,["style"])}const O=k(N,[["render",U]]);export{O as default};
