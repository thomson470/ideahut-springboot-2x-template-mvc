const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/KeyValue-Bb2tmbS-.js","assets/QTd-po4U0AVJ.js","assets/index-ZajWnxG1.js","assets/index-G0ic_0eP.css","assets/format-B8DKuPGh.js","assets/QTooltip-D4R9T5Fc.js","assets/QTable-CXYRITav.js","assets/ClosePopup-LSrQ-VjT.js","assets/RedisClients-BJlNDMW0.js","assets/QInnerLoading-DKttGab9.js","assets/TouchPan-B1-PqlLb.js"])))=>i.map(i=>d[i]);
import{_ as F,ag as C,Y as x,a7 as Q,$ as y,f as s,a0 as n,a9 as h,a4 as f,Z as K,a2 as S,a5 as d,a3 as m,G as P,ah as U,ai as k,aj as B,ak as A,C as v,al as g,a1 as z,F as I,ac as c,ae as i,af as p,r as u,am as T}from"./index-ZajWnxG1.js";import{Q as O}from"./QSpace-CfwQ6zIi.js";import{Q as _}from"./QTooltip-D4R9T5Fc.js";import{Q as j}from"./QInnerLoading-DKttGab9.js";import{e as N}from"./format-B8DKuPGh.js";import{Q as R}from"./QTd-po4U0AVJ.js";import{Q as L}from"./QTable-CXYRITav.js";import{C as G}from"./ClosePopup-LSrQ-VjT.js";import{T as D}from"./TouchPan-B1-PqlLb.js";let e;const Y={components:{KeyValue:C(()=>T(()=>import("./KeyValue-Bb2tmbS-.js"),__vite__mapDeps([0,1,2,3,4,5,6,7]))),Clients:C(()=>T(()=>import("./RedisClients-BJlNDMW0.js"),__vite__mapDeps([8,2,3,4,5,9,6,7,10])))},setup(){return{util:i,type:u(null),bean:u(null),is_group:u(!1),columns:[],table:u({rows:[],columns:[],loading:!1,flushing:{all:{},db:{}},pagination:{page:1,rowsPerPage:10}}),flush:u({show:!1,loading:!1,name:null,type:null,text:null,code:null}),info:u(c.dialog.init(()=>e.info)),view:u(c.dialog.init(()=>e.view)),clients:u(c.dialog.init())}},created(){e=this,e.columns=[{name:"label",label:e.$t("label.name"),field:"label",align:"left",sortable:!0},{name:"keyType",label:e.$t("label.key_type"),field:"keyType",align:"left",sortable:!0},{name:"keySerializer",label:e.$t("label.key_serializer"),field:"keySerializer",align:"left",sortable:!0},{name:"valueType",label:e.$t("label.value_type"),field:"valueType",align:"left",sortable:!0},{name:"valueSerializer",label:e.$t("label.value_serializer"),field:"valueSerializer",align:"left",sortable:!0},{name:"hashKeyType",label:e.$t("label.hash_key_type"),field:"hashKeyType",align:"left",sortable:!0},{name:"hashKeySerializer",label:e.$t("label.hash_key_serializer"),field:"hashKeySerializer",align:"left",sortable:!0},{name:"hashValueType",label:e.$t("label.hash_value_type"),field:"hashValueType",align:"left",sortable:!0},{name:"hashValueSerializer",label:e.$t("label.hash_value_serializer"),field:"hashValueSerializer",align:"left",sortable:!0}],e.do_request()},methods:{do_request(){e.table.loading=!0,p.call({path:"/redis/infos",onFinish(){e.table.loading=!1},onSuccess(l){if(i.isArray(l)){e.table.rows=l;for(const a of e.table.rows)e.table.flushing.all[a.name]=!1,e.table.flushing.db[a.name]=!1}}})},on_flush_click(l,a){i.isDefined(l)&&i.isDefined(a)?c.confirm(function(){e.table.flushing[l][a.row.name]=!0,p.call({path:"/redis/flush/"+l,params:{name:a.row.name},onFinish(){e.table.flushing[l][a.row.name]=!1},onSuccess(r){i.isString(r)&&(e.flush={show:!0,loading:!1,name:a.row.name,type:l,text:r,code:null})}})},"confirm.flush_"+l,a.row.label):(e.flush.loading=!0,p.call({path:"/redis/flush/"+e.flush.type,method:"post",params:{name:e.flush.name,code:e.flush.code},onFinish(){e.flush.loading=!1},onSuccess(){e.flush.show=!1}}))},on_client_click(l){let a=l.row;c.dialog.show(e.clients,{name:a.name,title:a.label,badge:a.isDefault})},on_info_click(l){c.dialog.show(e.info,{title:l.row.label,name:l.row.name,badge:l.row.isDefault===!0,rows:[],onRefresh:e.get_info})},get_info(l){let a=i.isObject(l)?l:{};i.apply(a.onStart),p.call({path:"/redis/properties",params:{name:a.parameters.name},onFinish(){i.apply(a.onFinish)},onSuccess(r){if(i.isObject(r)){let o=[];Object.keys(r).forEach(w=>{o.push({label:w,value:r[w]})}),i.sort.array(o,"label"),i.apply(a.onData,o)}},notify:!0})},on_view_click(l){let a=[];for(const r of l.cols)a.push({label:r.label,value:l.row[r.field]});c.dialog.show(e.view,{title:l.row.label,name:l.row.name,badge:l.row.isDefault===!0,search:!1,rows:a,color:{close:"red"},actions:[{color:"deep-orange-10",icon:"delete_sweep",label:e.$t("label.flush_all"),click:()=>e.on_flush_click("all",l)},{color:"pink-10",icon:"delete",label:e.$t("label.flush_db"),click:()=>e.on_flush_click("db",l)}]})}}},Z={class:"full-width row flex-center text-accent q-gutter-sm"},H={class:"text-subtitle2"},J={key:0},M={class:"col-6 text-left"},W={class:"col-6 text-right"};function X(l,a,r,o,w,b){const V=x("KeyValue"),E=x("Clients");return y(),Q(I,null,[s(L,{class:"table-sticky-header q-ma-sm",rows:o.table.rows,columns:o.columns,"row-key":"name",loading:o.table.loading,selection:"single",selected:o.table.selected,"onUpdate:selected":a[0]||(a[0]=t=>o.table.selected=t),pagination:o.table.pagination,"onUpdate:pagination":a[1]||(a[1]=t=>o.table.pagination=t),dense:l.$q.screen.lt.md,"no-data-label":l.$t("error.data_not_available"),"rows-per-page-label":" ","selected-rows-label":t=>{},"binary-state-sort":"",separator:"cell",bordered:""},{top:n(()=>[s(O),s(m,{glossy:"",round:"",dense:"",class:"q-ma-none q-ml-md",color:"indigo",icon:"refresh",loading:o.table.loading,onClick:b.do_request},{default:n(()=>[s(_,null,{default:n(()=>[f(d(l.$t("label.refresh")),1)]),_:1})]),_:1},8,["loading","onClick"])]),"no-data":n(({message:t})=>[h("div",Z,[s(P,{size:"2em",name:"block"}),h("span",H,d(t),1)])]),loading:n(()=>[s(j,{showing:"",color:"primary"})]),"body-selection":n(t=>[t.row.canExecute===!0?(y(),Q("div",J,[s(m,{glossy:"",round:"",dense:"",size:"sm",class:"q-ma-none q-ml-xs q-mr-sm",color:"lime-10",icon:"account_tree",onClick:q=>b.on_client_click(t)},{default:n(()=>[s(_,null,{default:n(()=>[f(d(l.$t("label.client")),1)]),_:1})]),_:2},1032,["onClick"]),s(m,{glossy:"",round:"",dense:"",size:"sm",class:"q-ma-none q-ml-xs q-mr-sm",color:"teal-10",icon:"lightbulb",onClick:q=>b.on_info_click(t)},{default:n(()=>[s(_,null,{default:n(()=>[f(d(l.$t("label.properties")),1)]),_:1})]),_:2},1032,["onClick"]),s(m,{glossy:"",round:"",dense:"",size:"sm",class:"q-ma-none q-ml-xs q-mr-sm",color:"deep-purple",icon:"visibility",onClick:q=>b.on_view_click(t)},{default:n(()=>[s(_,null,{default:n(()=>[f(d(l.$t("label.view")),1)]),_:1})]),_:2},1032,["onClick"])])):S("",!0)]),"body-cell":n(t=>[s(R,{props:t},{default:n(()=>[h("span",null,[f(d(t.value)+" ",1),t.col.name==="label"&&t.row.isDefault===!0?(y(),K(N,{key:0,color:"orange",rounded:"",align:"top",transparent:""})):S("",!0)])]),_:2},1032,["props"])]),_:1},8,["rows","columns","loading","selected","pagination","dense","no-data-label"]),s(g,{modelValue:o.flush.show,"onUpdate:modelValue":a[3]||(a[3]=t=>o.flush.show=t),"backdrop-filter":"blur(1px)",persistent:""},{default:n(()=>[s(U,null,{default:n(()=>[s(k,{class:"q-pa-xs q-pl-lg q-pr-lg text-center"},{default:n(()=>[f(d(l.$t("label.flush_input_code")),1)]),_:1}),s(k,{class:"q-pa-xs q-pl-lg q-pr-lg text-center text-weight-bold"},{default:n(()=>[f(d(o.flush.text),1)]),_:1}),s(k,{class:"q-pa-sm"},{default:n(()=>[s(B,{modelValue:o.flush.code,"onUpdate:modelValue":a[2]||(a[2]=t=>o.flush.code=t),type:"text",filled:"",dense:"","input-class":"text-center"},null,8,["modelValue"])]),_:1}),s(A,{class:"row"},{default:n(()=>[h("div",M,[v(s(m,{"no-caps":"",ripple:"",glossy:"",label:l.$t("label.cancel"),color:"negative"},null,8,["label"]),[[G]])]),h("div",W,[s(m,{"no-caps":"",ripple:"",glossy:"",label:l.$t("label.continue"),color:"positive",loading:o.flush.loading,disable:!o.flush.code,onClick:b.on_flush_click},null,8,["label","loading","disable","onClick"])])]),_:1})]),_:1})]),_:1},8,["modelValue"]),s(g,{modelValue:o.info.show,"onUpdate:modelValue":a[4]||(a[4]=t=>o.info.show=t),"transition-show":"scale","transition-hide":"fade","backdrop-filter":"blur(1px)",persistent:""},{default:n(()=>[v(s(V,{parameters:o.info.parameters,style:z(o.info.style)},null,8,["parameters","style"]),[[D,o.info.onDrag,void 0,{mouse:!0}]])]),_:1},8,["modelValue"]),s(g,{modelValue:o.view.show,"onUpdate:modelValue":a[5]||(a[5]=t=>o.view.show=t),"transition-show":"scale","transition-hide":"fade","backdrop-filter":"blur(1px)",persistent:""},{default:n(()=>[v(s(V,{parameters:o.view.parameters,style:z(o.view.style)},null,8,["parameters","style"]),[[D,o.view.onDrag,void 0,{mouse:!0}]])]),_:1},8,["modelValue"]),s(g,{modelValue:o.clients.show,"onUpdate:modelValue":a[6]||(a[6]=t=>o.clients.show=t),persistent:"","transition-show":"scale","transition-hide":"fade","backdrop-filter":"blur(1px)"},{default:n(()=>[s(E,{parameters:o.clients.parameters},null,8,["parameters"])]),_:1},8,["modelValue"])],64)}const re=F(Y,[["render",X]]);export{re as default};
